<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Bowen&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Bowen&#39;s blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Bowen&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Bowen Zhang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Bowen's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Bowen&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-a" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/31/a/" class="article-date">
  <time class="dt-published" datetime="2023-05-31T06:36:48.000Z" itemprop="datePublished">2023-05-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/31/a/">a</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/31/a/" data-id="clibc4sjm0000ckxvbnn4f7zy" data-title="a" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-对象存储实战指南学习笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/31/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2023-05-31T06:29:36.000Z" itemprop="datePublished">2023-05-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/31/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">对象存储实战指南学习笔记</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>#学习笔记</p>
<h2 id="1-对象存储概述"><a href="#1-对象存储概述" class="headerlink" title="1.对象存储概述"></a>1.对象存储概述</h2><p>###1.1 存储技术对比：</p>
<table>
<thead>
<tr>
<th align="left">维度</th>
<th align="left">块存储</th>
<th align="left">文件存储</th>
<th align="left">对象存储</th>
</tr>
</thead>
<tbody><tr>
<td align="left">适用范围<br>（网络边界）</td>
<td align="left">数据中心内</td>
<td align="left">数据中心内</td>
<td align="left">互联网、移动互联网（3G&#x2F;4G&#x2F;5G）<br>数据中心内</td>
</tr>
<tr>
<td align="left">使用者<br>（用户）</td>
<td align="left">机器</td>
<td align="left">办公帐号（AD&#x2F;LDAP）<br>机器</td>
<td align="left">云账号、社交帐号<br>兼容办公帐号<br>机器</td>
</tr>
<tr>
<td align="left">访问协议&#x2F;接口</td>
<td align="left">快协议<br>（ATA&#x2F;SCSI）</td>
<td align="left">文件协议<br>（NFS&#x2F;CIFS&#x2F;SMB）</td>
<td align="left">对象接口<br>（S3&#x2F;Blob&#x2F;OSS）</td>
</tr>
<tr>
<td align="left">后端技术</td>
<td align="left">Drive、DAS、SAN</td>
<td align="left">File System、NAS</td>
<td align="left">Object Storage</td>
</tr>
<tr>
<td align="left">特点</td>
<td align="left">机机交互</td>
<td align="left">人机交互<br>机机交互</td>
<td align="left">移动互联网交互<br>人机交互<br>机机交互</td>
</tr>
</tbody></table>
<p>####后端技术：<br>块存储：采用线性地址空间管理地址块，为主机提供指定容量空概念的访问。<br>文件存储：使用树来管理目录和文件的层级结构，目录类似树的中间节点，文件类似书的叶子节点，从而实现灵活的文件管理。<br>对象存储：采用桶和对象模型，在桶内采用平坦模式管理对象，提供线性扩展能力。</p>
<p>###1.2 存储技术架构<br>####存储区域网络（SAN Storage Area Network）–块存储<br>####网络附加存储（NAS Network Attached Storage）–文件存储<br>####对象存储架构（Object Storage）  </p>
<p>###1.3 公共云对象存储服务<br>####1.3.1 架构<br>#####3层架构（基于分布式文件系统构建）<br>逻辑视图（从下到上）：分布式文件系统（HDFS）、索引元数据（分布式键值存储，如HBASE）、对象服务功能 —–Google Cloud Storage、Aliyun OSS<br>#####2层架构（基于本地键值存储构建）<br>逻辑视图（从下到上）：分布式键值存储、对象服务功能 —-Ceph</p>
<p>####1.3.2 关键能力<br>按优先级从高到底：<br><strong>安全性：数据加密</strong><br><strong>高可靠：协调和复制，容错和数据完整性</strong><br><strong>高可用：数据保护</strong><br><strong>扩展性：命名和同步</strong>，<strong>元数据索引设计</strong>，<strong>数据迁移</strong><br><strong>性价比：数据生命周期</strong></p>
<h2 id="2-协调（Coordination）和复制（Replication）"><a href="#2-协调（Coordination）和复制（Replication）" class="headerlink" title="2.协调（Coordination）和复制（Replication）"></a>2.协调（Coordination）和复制（Replication）</h2><p><img src="https://upload-images.jianshu.io/upload_images/28940386-e3422f59a104e83d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="共识和复制对比"></p>
<p>在分布式系统中通过协调达成共识是普遍需求，部署在多台服务器间的进程都需要通信协调将关键数据达成一致。两将军首次提出不可靠网络的共识问题，然后演化为存在拜占庭故障的拜占庭将军问题，通过对问题的分析提出原子广播解决方案（Atomic Broadcast，ABCAST），鉴于原子广播无法支撑数据持久化能力，业界提出改进优化的视图复制（Viewstamped Replication，<strong>VR</strong>）和<strong>PAXOS</strong>，鉴于PAXOS的理论复杂度，业界又提出RAFT，它将PAXOS用更简单的方式描述，同时参考VR的工程实现优化。</p>
<p>共识技术要支持数据持久化能力会用到日志复制技术，而分布式存储系统需要做数据冗余也需要实现数据复制。</p>
<h3 id="2-1-协调"><a href="#2-1-协调" class="headerlink" title="2.1 协调"></a>2.1 协调</h3><p>两将军问题，采用固定次数的消息确认，解决通信网络不可靠时的共识问题。—-TCP&#x2F;IP三次握手<br>拜占庭将军问题，两种解决。1）根据分布式系统的服务器总数，限定发生拜占庭故障的服务器数。2）根据数字签名识别伪装的服务器，或根据序列号识别亚健康服务器的错误消息</p>
<p><strong>共识算法解决的核心问题是系统成员正常时如何解决多个请求提案的顺序处理问题并保证每个提案能够被系统成员投票达成一致，以及系统成员异常时如何重新选取成员并让系统重新进入正常状态。</strong></p>
<p>####VR 架构包含副本和客户端<br>VR在发生成员故障后，会在正常的副本中选主：</p>
<ul>
<li>选主是基于日志做恢复。</li>
<li>选主会基于视图的逻辑时钟序号和<strong>日志顺序号</strong>完成。</li>
<li>客户端复制代理发送请求时会携带缓存的<strong>视图序号</strong>，主会比对本地视图序号和请求视图序号，只有相同才允许执行，从而避免视图切换时请求到不匹配的数据。</li>
</ul>
<p>####PAXOS 架构组件：客户端，接收者（Accepter&#x2F;Voter），提案者（Proposer），学习者（Learner），领导者（Leader）<br>VR的副本和PAXOS的成员（提案者、接收者、学习者）对应，VR的主和PAXOS的领导者对应。VR用重配置（Reconfiguration）重新选主，PAXOS用提案者扮演领导者实现选主。</p>
<p>阿里云对象存储依赖女娲共识服务。</p>
<h3 id="2-2-复制"><a href="#2-2-复制" class="headerlink" title="2.2 复制"></a>2.2 复制</h3><p>####2.2.1数据冗余技术：副本；RAID；纠删码。</p>
<p>####2.2.2一致性<br>两个术语：<br>-<strong>CAP</strong>：<em>C一致性（Consistency，读请求应该得到最新写入数据，或者返回错误），A可用性（Availability，读&#x2F;写请求尽量得到响应，读可以不用返回最新写入数据），P表示分区容错能力（Partition tolerance，网络节点丢包后系统能够继续工作）。</em>常用于分布式系统，最终一致性（BASE）选择满足A和P而牺牲C。<br>-<strong>ACID</strong>：常用于数据库系统。</p>
<p>一致性模型：<br>-客服端一致性模型<br>-服务端数据副本一致性模型</p>
<p>####2.2.3复制协议<br>-基于主复制协议<br>至少2跳，第1跳由客户端发送请求给主，第2跳由主并行将请求发给多个副本。时延长，无并发冲突。<br>-客户端写复制协议<br>1跳，客户端并行发送给多个副本。时延短，有并发冲突。</p>
<p>####2.2.4存储领域的复制技术<br>#####SAN&#x2F;NAS的复制技术<br>按复制时间点分为基于快照的复制和基于IO日志的复制。<br>按复制位置分为同步复制和异步复制。<br>#####对象存储的复制技术<br>CEPH的对象存储构建在底层<strong>RADOS</strong>（Reliable Autonomic Distributed Object Store）技术上，其核心是基于<strong>OSD</strong>（Object Storage Device）的数据复制。OSD基于主复制协议。</p>
<h2 id="3-命名和同步"><a href="#3-命名和同步" class="headerlink" title="3.命名和同步"></a>3.命名和同步</h2><p><img src="https://upload-images.jianshu.io/upload_images/28940386-d55d81068285eca7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="命名和同步"></p>
<p>对象存储通过<strong>命名技术</strong>管理分布式系统的海量服务器，通过<strong>物理时钟</strong>实现大规模服务期间的<strong>时钟同步</strong>，通过<strong>逻辑时钟</strong>实现大规模服务器间的<strong>时序、数据同步</strong>。<br>###3.1 命名<br>对象存储综合应用了<strong>结构化命名、平坦命名，基于属性命名技术</strong>。<br>-<strong>平坦命名</strong>（非结构化命名）：IPV4（32位）&#x2F;IPV6（128位）、MAC地址（48位）、UUID（128位）。<br>-<strong>结构化命名</strong>：URL。（类似树形结构）<br>-<strong>基于属性命名</strong>：情形目录访问协议（Lightweight Directory Access Protocol，LDAP），记录多维度属性。</p>
<p>例子：<br>客户端请求访问“image-demo.oss-cn-hangzhou.aliyuncs.com&#x2F;example.jpg”对象时：<br>（1）<strong>DNS域名解析</strong>：解析URL的主机名image-demo.oss-cn-hangzhou.aliyuncs.com，得到对象存储主机的IP地址。<br>（2）客户端将请求包发送到指定IPv4地址的机器（服务器X），同时包含完整的URL名。X将请求和URL发送到对象存储的后端服务器（服务器B）。<br>（3）服务器B通过传入的URL得到对象名example.jpg，按照<strong>平坦空间寻址方法</strong><em>（按范围分区的字节比对查找和按哈希分区的计算查找）</em>找到数据所在硬盘的UUID。<br>（4）根据对象名example.jpg对应的硬盘的<strong>UUID</strong>，就可以取回数据。<br>（5）对象存储支持标签功能。标签按照<strong>基于属性命名</strong>技术组织，提供Key-Value键值对，为对象提供更多维度的信息。</p>
<p>###3.2 同步</p>
<p>####3.2.1 物理时钟<br>对象存储云服务中的服务器之间通常基于网络时间协议（Network Time Protocol， NTP），即基于网络包交换实现计算机系统间的时钟同步协议，位于OSI模型的应用层。</p>
<p>####3.2.2 逻辑时钟<br>对象存储通常使用逻辑时钟来提供序号，为多节点的交互控制提供时许控制，保证请求的顺序性。</p>
<p>例子：<br><strong>CEPH</strong>对于并发写请求，通过<strong>主OSD</strong>的ObjectStore::Sequencer递增序号来实现逻辑时钟，为每个客户端发送过来的写请求分配序号，然后主OSD将写请求复制到多个<strong>从OSD</strong>，并使用该序号作为并发请求的先后顺序，保证请求在多个从OSD上的顺序性。</p>
<h2 id="4-容错和数据完整性"><a href="#4-容错和数据完整性" class="headerlink" title="4.容错和数据完整性"></a>4.容错和数据完整性</h2><p><strong>容错设计提升系统可用性，数据完整性提升系统的数据持久度。</strong><br>###4.1容错<br><img src="https://upload-images.jianshu.io/upload_images/28940386-0aae966777fe8601.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="容错概念点"></p>
<p><strong>容错（Fault Tolerance）</strong>是指部件出现故障后，系统仍然能够继续工作。</p>
<p>分布式系统的容错设计与存储区域网络（SAN）和网络附加存储（NAS）的双控（Dual Controller）系统容错思路不同。<strong>“不再通过单服务器内部件冗余提升可靠性，而是搭建多服务器系统使整体达到高可靠性”。</strong></p>
<p>###4.2数据完整性<br><img src="https://upload-images.jianshu.io/upload_images/28940386-42a2b77bb155ca98.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="数据完整性概念点"></p>
<p><strong>Data Integrity</strong>: Secure（物理层面的安全），Accurate、Consistent、Complete（逻辑层面的正确、一致、完备）</p>
<p>从<strong>物理完整性</strong>看，要通过类似纠删码（Erasure Code，EC）的冗余技术来实现数据损坏的修复；从<strong>逻辑完整性</strong>看，要通过业务、应用层的保护机制实现数据损坏的修复，如数据复制和备份。</p>
<p><strong>对象存储数据损坏</strong>：<br><strong>运行时刻</strong>时通过端到端的循环冗余校验检测数据损坏：数据上传时；数据存储时校验数据和元数据（分片保存）；写入磁盘前。<br><strong>静态时刻</strong>时利用磁盘上的分布式存储模块（如HDFS）进行静态数据扫描，读取保存的数据和保存校验值，然后CPU通过计算保存数据得到计算的校验值，两个校验值比对。</p>
<h2 id="5-元数据索引设计"><a href="#5-元数据索引设计" class="headerlink" title="5.元数据索引设计"></a>5.元数据索引设计</h2><p><img src="https://upload-images.jianshu.io/upload_images/28940386-39b0c32f60932c3f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="元数据索引设计"></p>
<p>元数据索引是为公共云对象存储服务提供键值管理的核心技术，它需要提供<strong>变长</strong>的空间管理和弹性扩展能力。</p>
<p><strong>对象存储的元数据管理的关键在于存储空间（Bucket）&#x2F;对象（Object）的写&#x2F;读&#x2F;删除&#x2F;遍历操作，没有复杂查询需求。</strong></p>
<p>几种NoSQL数据模型对比：</p>
<table>
<thead>
<tr>
<th align="left">数据模型</th>
<th align="left">性能</th>
<th align="left">拓展性</th>
<th align="left">灵活性</th>
<th align="left">复杂度</th>
<th align="left">功能性</th>
</tr>
</thead>
<tbody><tr>
<td align="left">键值存储</td>
<td align="left">高</td>
<td align="left">高</td>
<td align="left">高</td>
<td align="left">低</td>
<td align="left">可选择性实现</td>
</tr>
<tr>
<td align="left">列存</td>
<td align="left">高</td>
<td align="left">高</td>
<td align="left">中</td>
<td align="left">低</td>
<td align="left">最简单</td>
</tr>
<tr>
<td align="left">文档存储</td>
<td align="left">高</td>
<td align="left">高</td>
<td align="left">高</td>
<td align="left">低</td>
<td align="left">可选择性实现</td>
</tr>
<tr>
<td align="left">图存储</td>
<td align="left">可调整性能</td>
<td align="left">可选拓展</td>
<td align="left">高</td>
<td align="left">高</td>
<td align="left">图理论</td>
</tr>
</tbody></table>
<p>键值存储通常采用<strong>树</strong>来组织键名，从而既支持读&#x2F;写&#x2F;删除操作，又友好支持遍历操作。通常采用树组织键名的顺序为<strong>字典序</strong>，可以按照字母顺序遍历键名。</p>
<p>键值存储基于CAP理论选择牺牲C（Consistency）、优化A（Availability）和P（Partition tolerance），从而可以选择实现从最终一致性（Eventual Consistency）到串行一致性（Serializability）的不同一致性模型。</p>
<h2 id="6-无"><a href="#6-无" class="headerlink" title="6. 无"></a>6. 无</h2><p>明确几个概念<br><strong>存储空间（Bucket）</strong>是用户用于存储对象（Object）的容器，即“桶”。所有对象都必须隶属于某个存储空间。它具有各种配置属性，包括地域、访问权限、存储类型等。</p>
<ul>
<li>同一个存储空间的内部是扁平的，没有文件系统的目录等概念，所有对象都直接隶属于其对应的存储空间。</li>
<li>每个用户可以拥有多个存储空间</li>
<li>存储空间的名称在对象存储服务范围内全局唯一，并且创建后无法修改存储空间的名称。</li>
<li>存储空间内部的对象数目没有限制。</li>
</ul>
<p><strong>对象（object）</strong>是对象存储服务存放数据的基本单元，也被称为对象存储服务的文件。对象由对象名（Key）、用户数据（Object Data）和元数据信息（Object Meta）组成。对象由存储空间内部唯一的对象名来标志，元数据信息是一组键值对，表示对象的属性，如最后修改时间、大小等信息，也可以自定义存储信息。</p>
<p>对象的生命是从上传成功到删除为止的，只有通过追加上传方式创建的对象能够不断增加数据内容，其他上传方式创建的对象无法直接修改写，但可以通过重复上传同名的对象来覆盖之前的对象。</p>
<p><strong>访问域名（Endpoint）</strong>表示对象存储服务器对外提供的域名，对象存储服务以HTTP&#x2F;HTTPS的RESTful API形式对外提供服务，当访问不同地域的时候，需要不同的域名，通过内网和外网访问对象存储OSS相同地域所对应的访问域名并不相同。</p>
<h2 id="7-数据迁移"><a href="#7-数据迁移" class="headerlink" title="7.数据迁移"></a>7.数据迁移</h2><p><img src="https://upload-images.jianshu.io/upload_images/28940386-781aa5806f93296d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="数据迁移"></p>
<p>###镜像回源<br><strong>镜像回源功能，在业务读取OSS数据不存在时，将从源站抓取数据。</strong><br>步骤如下：</p>
<ol>
<li>迁移存量数据</li>
<li>配置镜像回源：在数据迁移过程中源站还在产生新数据</li>
<li>业务切换到OSS</li>
<li>迁移增量数据</li>
</ol>
<h2 id="8-安全与合规"><a href="#8-安全与合规" class="headerlink" title="8.安全与合规"></a>8.安全与合规</h2><p><img src="https://upload-images.jianshu.io/upload_images/28940386-1a205733d58ce0a8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="安全与合规"></p>
<p>###数据加密</p>
<ul>
<li><strong>服务端加密（Server Side Encryption，SSE）</strong>，是指上传到云的链路是明文，数据保存是密文，从而保证存储数据的私密性的一种加密技术。技术上，对象存储OSS对收到的用户数据进行加密，然后将得到的加密数据持久化保存下来：下载数据时，OSS自动对保存的加密数据进行解密并把原始数据返回给用户，并在返回的HTTP请求Header中，对象存储声明该数据进行了服务端加密。</li>
<li><strong>客户端加密（Client Side Encryption，CSE）</strong>，是指为进一步加强私密性，在上传到云之前就进行加密，整个上云的链路、数据保存都是密文的一种加密技术。客户端加密需要客户端来管理加解密的密钥，服务端只把数据作为普通对象保存。客户端加密的安全性更高，但对客户端有较大性能影响。</li>
</ul>
<h2 id="9-数据保护"><a href="#9-数据保护" class="headerlink" title="9.数据保护"></a>9.数据保护</h2><p><img src="https://upload-images.jianshu.io/upload_images/28940386-83d60bf1c79df9df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="数据保护"></p>
<p>###数据持久性<br>数据持久性同时考虑了数据故障率。数据错误率，如11个9的持久性，就表示一万年的时间期限内，10MB数据只有1B数据有异常，表示该1B数据出现故障丢失或数据错误。</p>
<p>###服务可用性<br>对象存储OSS基于请求错误率模型提供可用性SLA，其标准型（同城冗余）存储的可用性SLA已经提升到99.995%。就是10万个请求中，最多只有5个请求返回服务端错误。</p>
<p>###版本控制<br>三种控制状态：</p>
<ul>
<li>未开启 </li>
<li>开启 对象存储OSS将为新上传的对象生成全局唯一的随机字符串版本ID</li>
<li>暂停 对象存储OSS将为新上传的对象生成特殊字符为“null”的版本ID</li>
</ul>
<h2 id="10-应用与实战"><a href="#10-应用与实战" class="headerlink" title="10.应用与实战"></a>10.应用与实战</h2><p>###对象元信息<br>分为两种：<strong>HTTP标准属性（HTTP Headers）和User Meta（用户自定义元信息）</strong></p>
<table>
<thead>
<tr>
<th align="left">元信息</th>
<th align="left">名称</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"></td>
<td align="left">Content-Type</td>
<td align="left">指定对象的文件类型、编码等</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">Content-Encoding</td>
<td align="left">指定对象的压缩类型</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">Content-Language</td>
<td align="left">指定对象使用的语言</td>
</tr>
<tr>
<td align="left">HTTP标准属性</td>
<td align="left">Content-Disposition</td>
<td align="left">指定对象的展示形式incline&#x2F;attachment</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">Cache-Control</td>
<td align="left">指定对象缓存配置</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">Expires</td>
<td align="left">指定对象有效时间</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">Last-Modified</td>
<td align="left">最后修改时间</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">Content-Length</td>
<td align="left">大小</td>
</tr>
<tr>
<td align="left">User Meta</td>
<td align="left">以x-oss-meta-为前缀的参数</td>
<td align="left">总大小不超过8KB，会在读对象（GetObject）或读对象元数据（HeadObject）的时候在HTTP头部中返回</td>
</tr>
</tbody></table>
<h3 id="数据生命周期"><a href="#数据生命周期" class="headerlink" title="数据生命周期"></a>数据生命周期</h3><p>生命周期规则可以定期将非热点数据转换为<strong>低频访问</strong>、<strong>归档存储</strong>或<strong>冷归档存储</strong>，将不再需要访问的数据删除，从而使用户更高效地管理数据、节省成本。</p>
<p>生命周期规则包含以下三类信息：</p>
<ul>
<li><strong>匹配策略</strong>，匹配对象的名字、标签。<br>–  按前缀匹配，按指定前缀匹配对象和碎片。<br>– 按标签匹配，按指定标签的Key和Value匹配对象。<br>– 按前缀+标签匹配，按指定前缀和一个或多个标签的筛选条件匹配对象。<br>– 配置到整个存储空间，匹配整个存储空间内的所有对象和碎片。</li>
<li><strong>文件过期策略</strong>，设置对象的过期时间。<br>– 过期天数，指定一个过期天数N，对象会在其最后修改时间的N天后过期。<br>– 过期日期，指定一个过期日期，最后修改时间在该日期之前的对象全部过期。</li>
<li><strong>指定操作</strong>，设置文件过期后的动作。<br>–类型转换（Transition），将指定存储类型的对象转换为另外的存储类型。<br>–过期删除（Expire），将指定存储类型的过期对象按规则删除。</li>
</ul>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;LifecycleConfiguration&gt;</span><br><span class="line">  &lt;Rule&gt;</span><br><span class="line">    &lt;ID&gt;test-rule0&lt;/ID&gt;</span><br><span class="line">    &lt;Prefix&gt;doc/&lt;/Prefix&gt;</span><br><span class="line">    &lt;Status&gt;Enabled&lt;/Status&gt;</span><br><span class="line">    &lt;Transition&gt;</span><br><span class="line">      &lt;Days&gt;180&lt;/Days&gt;</span><br><span class="line">      &lt;StorageClass&gt;IA&lt;/StorageClass&gt;</span><br><span class="line">    &lt;/Transition&gt;</span><br><span class="line">    &lt;Expiration&gt;</span><br><span class="line">      &lt;Days&gt;365&lt;/Days&gt;</span><br><span class="line">    &lt;/Expiration&gt;</span><br><span class="line">  &lt;/Rule&gt;</span><br><span class="line">&lt;LifecycleConfiguration&gt;</span><br></pre></td></tr></table></figure>

<p>###上传对象</p>
<ul>
<li><p>简单上传</p>
</li>
<li><p>表单上传</p>
</li>
<li><p><strong>分片上传和断点续传</strong><br><img src="https://upload-images.jianshu.io/upload_images/28940386-8461f3bae91ec49c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="分片上传流程图"></p>
</li>
<li><p><strong>追加上传</strong><br>对象存储OSS的对象只能读取，不能修改。如果对象内容发生改变，只能重新上传同名对象进行覆盖。</p>
</li>
</ul>
<p>追加上传方式对象类型为<strong>Appendable Object</strong>（其他上传为Normal Object），每次追加上传的数据都能够即时可读。</p>
<ul>
<li>授权第三方上传<br>客户端直接上传文件到OSS，不需通过服务端转发。两种实现方式：URL签名和临时访问凭证。</li>
<li>上传回调<br>客户端上传对象到OSS后，OSS会向服务端主动发起HTTP请求进行回调，从而服务端就可以及时得到上传完成的通知并完成诸如数据库修改等操作，OSS收到服务端的回调请求响应后才会将状态返回给客户端。</li>
<li>RTMP推流上传</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/31/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-id="clibc4sjq0001ckxvfo4r7ob2" data-title="对象存储实战指南学习笔记" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/31/hello-world/" class="article-date">
  <time class="dt-published" datetime="2023-05-31T05:56:19.315Z" itemprop="datePublished">2023-05-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/31/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/05/31/hello-world/" data-id="clibc4sjx0002ckxv9eqq3g66" data-title="Hello World" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/31/a/">a</a>
          </li>
        
          <li>
            <a href="/2023/05/31/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">对象存储实战指南学习笔记</a>
          </li>
        
          <li>
            <a href="/2023/05/31/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 Bowen Zhang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>